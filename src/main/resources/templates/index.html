<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

    <head th:replace="/fragments/head :: head"/>

    <body>
        <header th:replace="/fragments/header :: header" />
        <nav th:replace="/fragments/nav :: nav"/>
        <!-- Imagenes del slider -->
        <div class="slider">
            <div>
                <img
                    class="slider-images"
                    src="/img/AdobeStock_169692156.webp"
                    alt="Imagen 1"
                    />
            </div>
            <div>
                <img
                    class="slider-images"
                    src="/img/architecture-1836070_960_720-1.jpg"
                    alt="Imagen 2"
                    />
            </div>
            <div>
                <img
                    class="slider-images"
                    src="/img/Compraventa-de-bienes-inmuebles-en-Panamá.jpg"
                    alt="Imagen 3"
                    />
            </div>
            <div>
                <img
                    class="slider-images"
                    src="/img/tipos-inmuebles-nexo-inmobiliaria.jpg"
                    alt="Imagen 3"
                    />
            </div>
        </div>

        <!-- Codigo del Slider -->
        <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
        <script>
            $(document).ready(function () {
                $(".slider").slick({
                    autoplay: true,
                    autoplaySpeed: 2000,
                    dots: true,
                    arrows: false
                });
            });
        </script>
        <!--ES PARA LA LISTA-->


        <div class="titulo-seccion">
            <h2>Inmuebles</h2>
        </div>
        <section>
            <div class="contenedorTarjetas" th:each="inmueble : ${inmuebles}">
                <a  th:href="@{/vistaInmueble/__${inmueble.id}__}">

                    <div class="tarjeta" th:if="@{/imagen/inmueble/__${inmueble.imagen.id}__} != null">
                        <img th:src="@{/imagen/inmueble/__${inmueble.imagen.id}__}" alt="imagen inmueble"/>
                        <!-- Otros elementos de la tarjeta -->
                        <p th:text="'Tipo:  ' + ${inmueble.tipo}"></p>
                        <p th:text="'Provincia:  ' + ${inmueble.provincia}"></p>
                        <p th:text="'Departamento:  ' + ${inmueble.departamento}"></p>
                        <p th:text="'Precio:  ' + ${inmueble.precio} + '$'"></p>

                        <!-- Formulario para cliente autenticado -->
                        <div th:if="${cliente != null}">
                            <form th:action="@{/inmueble/comprar/__${inmueble.id}__}" method="get">
                                <input type="hidden" th:value="${cliente.id}" name="id"/>
                                <input type="hidden" th:value="${inmueble.id}" name="idInmueble"/>
                                <button type="submit" th:if="${cliente.rol == rol}">Comprar</button>
                            </form>
                        </div>
                        <!-- Formulario para cliente no autenticado -->
                        <div th:if="${cliente == null}">
                            <!-- Formulario para cliente no autenticado -->
                            <form th:action="@{/login}" method="get">
                                <button type="submit" th:if="${inmueble.ente != '' }">Comprar</button>
                            </form>
                        </div>
                    </div>


                    <div th:if="@{/imagen/inmueble/__${inmueble.id}__} == null" >
                        <p>error</p>
                    </div></a>
            </div>
        </section>

        <!-- Seccion de ofertas -->
        <div class="titulo-seccion">
            <h2>¡Ofertas Especiales!</h2>
        </div>

        <section class="ofertas">
            <div>
                <p><a href="#" class="oferta-especial-btn">Conoce más</a></p>
                <img
                    class="oferta"
                    src="/img/download.jpg"
                    alt="Oferta 1"
                    />
            </div>
            <div>
                <p><a href="#" class="oferta-especial-btn">Conoce más</a></p>
                <img
                    class="oferta"
                    src="/img/oferta_inmobiliaria_paquete_diseno_pagina_web_publica_casas_locales_departamentos_terrenos_en_linea_dimension_digital_com_website_sistema.jpg"
                    alt="Oferta 2"
                    />
            </div>
            <div>
                <p><a href="#" class="oferta-especial-btn">Conoce más</a></p>
                <img
                    class="oferta"
                    src="/img/images.jpg"
                    alt="Oferta 3"
                    />
            </div>
        </section> 

        <!-- Seccion del Footer -->
        <footer th:replace="/fragments/footer :: footer" />
        <script src="index.js"></script>
    </body>

</html>