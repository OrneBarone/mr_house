<html xmlns:th="http://www.thymeleaf.org">
    <head th:replace = "/fragments/head :: head"
          <link rel="stylesheet" href="/css/registrar.css" />

    <body sec:authorize="hasAnyRole('ENTE', 'ADMIN')">
    <head th:replace = "/fragments/header :: header"/>
    <head th:replace = "/fragments/nav :: nav"/>
    <div class="container-fluid m-5 contenedor">

                    <div class="form-group my-3">
                        <input type="number" class="form-control" name="antiguedad" placeholder="Antiguedad del inmueble" th:value="${antiguedad}">
                    </div>

        <form class="container" th:action="@{/inmueble/registro}" method="POST" enctype="multipart/form-data">
            <div class="form-group">

                    <script>
                        document.addEventListener("DOMContentLoaded", function () {
                            const $selectProvincias = document.getElementById("provincias");
                            const $selectMunicipios = document.getElementById("municipios");

                <div class="form-group my-3">
                    <h2 class="mb-2">Cargar Inmueble</h2> 
                    <input type="text" class="form-control" name="tipo" placeholder="Tipo de inmueble" th:value="${tipo}">
                </div>

                <div class="form-group my-3">
                    <input type="number" class="form-control" name="antiguedad" placeholder="Antiguedad del inmueble" th:value="${antiguedad}">
                </div>

                <div class="form-group my-3">
                    <input type="number" class="form-control" name="mts2" placeholder="Metros cuadrados del inmueble" th:value="${mts2}">
                </div>
                <div class="form-group my-3">
                    <input type="text" class="form-control" name="provincia" placeholder="Provincia" th:value="${provincia}">
                </div>
                <div class="form-group my-3">
                    <input type="text" class="form-control" name="departamento" placeholder="Departamento" th:value="${departamento}">
                </div>
                <div class="form-group my-3">
                    <input type="text" class="form-control" name="direccion" placeholder="Direccion del inmueble" th:value="${direccion}">
                </div>
                <div class="form-group my-3">
                    <input type="number" class="form-control" name="precio" placeholder="Valor del Inmueble" th:value="${precio}">
                </div>
                <div class="form-group my-3">
                    <input type="file" class="form-control" name="archivo" th:value="${archivo}" >
                </div>
                <div class="form-group my-3">
                    <input type="text" class="form-control" name="descripcion" placeholder="Descripcion del inmueble" th:value="${descripcion}">
                </div>

                <button type="submit" class="btn btn-primary mt-3 botones">Guardar</button>
            </div>

        </form>

                                            $selectMunicipios.innerHTML = $options;
                                        })
                                        .catch((error) => {
                                            let message = error.statusText || "Ocurrió un error";
                                            $selectMunicipios.nextElementSibling.innerHTML = `Error: ${error.status}: ${message}`;
                                        });
                            }

                            $selectProvincias.addEventListener("change", (e) => {
                                municipio(e.target.value);
                                console.log(e.target.value);
                            });

                            provincia(); // Llamada inicial para cargar las provincias al cargar la página
                        });
                    </script>
                    <select id="provincias" class="searcher-form" name='provincia' th:value="${provincia}">
                        <option value="" disabled selected >Elige una provincia</option>
                    </select>

                    <select id="municipios" class="searcher-form" name='departamento' th:value="${departamento}">
                        <option value="" disabled selected >Elige un municipio</option>
                    </select>

                    <div class="form-group my-3">
                        <input type="text" class="form-control" name="direccion" placeholder="Direccion del inmueble" th:value="${direccion}">
                    </div>
                    <div class="form-group my-3">
                        <input type="number" class="form-control" name="precio" placeholder="Valor del Inmueble" th:value="${precio}">
                    </div>
                    <div class="form-group my-3">
                        <input type="file" class="form-control" name="archivo" th:value="${archivo}" >
                    </div>
                    <div class="form-group my-3">
                        <input type="text" class="form-control" name="descripcion" placeholder="Descripcion del inmueble" th:value="${descripcion}">
                    </div>

                    <button type="submit" class="btn btn-primary mt-3 botones">Guardar</button>
                </form>
                <div>
                    <div>
                        <a th:href="@{/}" class="volver">Volver</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- Sección del Footer -->
        <footer th:replace="/fragments/footer :: footer"></footer>
        <script src="index.js"></script>
    </body>
</html>



